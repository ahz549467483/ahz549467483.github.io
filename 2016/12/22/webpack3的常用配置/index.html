<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Testing,Another Tag," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="#webpack3中常用的一些操作 ##新建配置文件开始之前我们需要新建一些我们开始需要的文件，package.json文件， index.js入口文件，首先我 12$ mkdir webpackdemo &amp;amp;&amp;amp; yarn init &amp;amp;&amp;amp; yarn webpack --dev$ cd webacpkdemo &amp;amp;&amp;amp; mkdir src &amp;amp;&amp;amp">
<meta name="keywords" content="Testing,Another Tag">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack3中常用的一些操作">
<meta property="og:url" content="http://ahz549467483.github.io/2016/12/22/webpack3的常用配置/index.html">
<meta property="og:site_name" content="码猴之家">
<meta property="og:description" content="#webpack3中常用的一些操作 ##新建配置文件开始之前我们需要新建一些我们开始需要的文件，package.json文件， index.js入口文件，首先我 12$ mkdir webpackdemo &amp;amp;&amp;amp; yarn init &amp;amp;&amp;amp; yarn webpack --dev$ cd webacpkdemo &amp;amp;&amp;amp; mkdir src &amp;amp;&amp;amp">
<meta property="og:updated_time" content="2017-09-14T10:41:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="webpack3中常用的一些操作">
<meta name="twitter:description" content="#webpack3中常用的一些操作 ##新建配置文件开始之前我们需要新建一些我们开始需要的文件，package.json文件， index.js入口文件，首先我 12$ mkdir webpackdemo &amp;amp;&amp;amp; yarn init &amp;amp;&amp;amp; yarn webpack --dev$ cd webacpkdemo &amp;amp;&amp;amp; mkdir src &amp;amp;&amp;amp">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://ahz549467483.github.io/2016/12/22/webpack3的常用配置/"/>





  <title>webpack3中常用的一些操作 | 码猴之家</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">码猴之家</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">原谅我放荡不羁爱coding</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-tags " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://ahz549467483.github.io/2016/12/22/webpack3的常用配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Joker Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/myavator.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码猴之家">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">webpack3中常用的一些操作</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-22T12:39:04+08:00">
                2016-12-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cc/" itemprop="url" rel="index">
                    <span itemprop="name">cc</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/22/webpack3的常用配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/22/webpack3的常用配置/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>#webpack3中常用的一些操作</p>
<p>##新建配置文件<br>开始之前我们需要新建一些我们开始需要的文件，package.json文件， index.js入口文件，首先我</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir webpackdemo &amp;&amp; yarn init &amp;&amp; yarn webpack --dev</div><div class="line">$ cd webacpkdemo &amp;&amp; mkdir src &amp;&amp; cd src &amp;&amp; touch index.js</div></pre></td></tr></table></figure>
<p>通过上面的命令行创建项目目录，并初始化配置文件，导入webpack, 并创建项目入口文件</p>
<p>在index.js中添加我们的内容，在这里我们引入lodash来作为本次的demo演示数据内容部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add lodash --dev</div></pre></td></tr></table></figure>
<p>安装lodash后，进入index.js页面进行首次页面的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import _ from  &apos;lodash&apos;</div><div class="line">function component()&#123;</div><div class="line">	var element= document.createElement(&apos;div&apos;);</div><div class="line">	element.innerHtml = _.join([&apos;你好&apos;,&apos;世界&apos;],&apos;&apos;);</div><div class="line">	return element</div><div class="line">&#125;</div><div class="line">document.body.appendChild(component())</div></pre></td></tr></table></figure>
<p>好我们的首次入口文件就已经添加好了，下面创建编译后的文件夹以及编译后的插入页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir dist &amp;&amp; cd dist &amp;&amp; touch index.html</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//index.html</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=&quot;en&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">	&lt;title&gt;Document&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;// bundle.js就是后面我们编译后的文件名</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>下面我们就行新webpack.config.js的编写，这个名字是webpack执行默认文件的名字，在执行webpack操作时会自动运行该文件。<br>在编写该文件之前我们尝试用最初的方法执行下编译</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./node_modules/.bin/webpack src/index.js dist/bundle.js</div></pre></td></tr></table></figure>
<p>执行index.js并将生成bundle.js文件放入dist文件夹，这是最低级的办法，在工作中基本不会用到，下面则进行配置进行打包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;)</div><div class="line">module.epxort = &#123;</div><div class="line">	entry:&apos;./src/index.js&apos;,//入口文件</div><div class="line">	output:&#123;</div><div class="line">		filename:&apos;bundle.js&apos;,//编译后的文件名</div><div class="line">		path:path.resolve(__dirname, &apos;dist&apos;)//文件路径</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在 package 文件中进行webpack的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;script&quot;:&#123;</div><div class="line">	&quot;build&quot;: &quot;webpack&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行命令行<code>$ yarn run build</code>,就会发现也会也会实现上面相同的功能</p>
<p>##打包其他类型文件<br>这部分内容，主要利用的是label的运用，在module模块下面的rules中添加我们需要打包的类型以及处理操作</p>
<p>####打包css文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;)</div><div class="line">module.epxort = &#123;</div><div class="line">	entry:&apos;./src/index.js&apos;,//入口文件</div><div class="line">	output:&#123;</div><div class="line">		filename:&apos;bundle.js&apos;,//编译后的文件名</div><div class="line">		path:path.resolve(__dirname, &apos;dist&apos;)//文件路径</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		rules:[</div><div class="line">			&#123;</div><div class="line">				test:&apos;\.css&apos;,//不要打包类型的匹配</div><div class="line">				use:[</div><div class="line">					&apos;style-loader&apos;,</div><div class="line">					&apos;css-loader&apos;</div><div class="line">				]</div><div class="line">				//</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里注意，在webpack2 中-loader可省略的设置被取消掉了，必须要填写完全才可以运行，否则会报错，而执行操作的loader的相关功能，可以参展<a href="https://doc.webpack-china.org/loaders/" target="_blank" rel="external">webpack官网</a>进行配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add style-loader css-loader --dev</div></pre></td></tr></table></figure>
<p>最后新建样式文件，并引入到index.js的文案里面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ touch style.css</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//style.css</div><div class="line">.classname &#123;</div><div class="line">	color:blue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import _ from  &apos;lodash&apos;;</div><div class="line">import &apos;./style.css&apos;;</div><div class="line">function component()&#123;</div><div class="line">	var element= document.createElement(&apos;div&apos;);</div><div class="line">	element.innerHtml = _.join([&apos;你好&apos;,&apos;世界&apos;],&apos;&apos;);</div><div class="line">	element.classList.add(&apos;classname&apos;) //添加类名</div><div class="line">	return element</div><div class="line">&#125;</div><div class="line">document.body.appendChild(component())</div></pre></td></tr></table></figure>
<p>同上执行命令行运行就会发现生成两个文件，一个是js,一个是样式文件</p>
<p>###打包图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line">module.epxort = &#123;</div><div class="line">	entry:&apos;./src/index.js&apos;,//入口文件</div><div class="line">	output:&#123;</div><div class="line">		filename:&apos;bundle.js&apos;,//编译后的文件名</div><div class="line">		path:path.resolve(__dirname, &apos;dist&apos;)//文件路径</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		rules:[</div><div class="line">			&#123;</div><div class="line">				test:/\.css/,//打包类型的匹配</div><div class="line">				use:[</div><div class="line">					&apos;style-css&apos;,</div><div class="line">					&apos;css-loader&apos;</div><div class="line">				]</div><div class="line">				//</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.(png|svg|jpg|gif)$/, //匹配图片</div><div class="line">				user:[&apos;file-loader&apos;]</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>同样在选择一张图片，并引入到入口文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import _ from  &apos;lodash&apos;;</div><div class="line">import &apos;./style.css&apos;;</div><div class="line">improt imgUrl from &apos;./img.png&apos;;</div><div class="line">function component()&#123;</div><div class="line">	var element= document.createElement(&apos;div&apos;);</div><div class="line">	var Img = new Image();</div><div class="line">	Img.src=imgUrl</div><div class="line">	element.innerHtml = _.join([&apos;你好&apos;,&apos;世界&apos;],&apos;&apos;);</div><div class="line">	element.classList.add(&apos;classname&apos;) //添加类名</div><div class="line">	element.appendChild(Img)</div><div class="line">	return element</div><div class="line">&#125;</div><div class="line">document.body.appendChild(component())</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add file-loader --dev</div></pre></td></tr></table></figure>
<p>运行webpack 就会生成三中不同类型的文件，图片，样式，js文件。</p>
<p>###其他类型的打包<br>上面介绍了基础的一些文件的打包，其实还有可以打包的，比如说字体等，一些很多loader的配置，在这里就不一一举例了，可以自己全看文档进行学习</p>
<p>##输出管理</p>
<p>###多入口的添加<br>在一些时候我们需要进行多个入口文件，所以导致在编译的时候需要进行多入口的编译打包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line">module.epxort = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		app:&apos;./src/index.js&apos;,</div><div class="line">		other:&apos;./src/other.js&apos;</div><div class="line">	&#125;,//入口文件</div><div class="line">	output:&#123;</div><div class="line">		filename:&apos;[name].bundle.js&apos;,//编译后的文件名</div><div class="line">		path:path.resolve(__dirname, &apos;dist&apos;)//文件路径</div><div class="line">	&#125;,</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过上面的操作就会进行多入口的操作，下面filename中的[name],就表示entry中入口文件的key,打包编译后就会生成app.bundle.js和other.bundle.js两个文件，同时我们在index.html中添加引入other.bundle.js的入口，当时文件一多这样就太麻烦了，所以我梦需要插件的协助，也是plugins等。</p>
<p>###Plugins<br>插件的使用和目的都是为了大大减轻我们在操作中的痛点，能够自动化的完成我们需要手动完成的事情</p>
<blockquote>
<p><strong>html-webpack-plugin</strong></p>
</blockquote>
<p>html-webpack-plugin插件的作用就是将编译好的文件自动插入到html文件中，并且可以设置一些属性操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add html-webpack-plugin --dev</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">...</div><div class="line">&#123;	</div><div class="line">	...</div><div class="line">	&apos;plugins&apos;:[</div><div class="line">		new HtmlWebpackPlugin(&#123;</div><div class="line">			title:&apos;demo&apos;,	//设置html文件title</div><div class="line">			filename:&apos;index.html&apos;, //写入html文件的文字,默认index</div><div class="line">			template:&apos;./src/index.html&apos;, //设置模板文件，即文件内容会跟模板一样</div><div class="line">			inject:&apos;body&apos; //编译文件添加到html中的位置，true和body都会放到body的底部</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行webpack命令行，自动生成文件并且插入到模板文件中.</p>
<blockquote>
<p><strong>clean-webpack-plugin</strong></p>
</blockquote>
<p>我们每执行一次文件发现都会新增一次文件，这就导致我们必须要手动每次删除文件夹，clean-webpack-plugin插件很好的结局了这个问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add clean-webpack-plugin --dev</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">const HtmlWebpackPlugin = require(&apos;clean-webpack-plugin&apos;)</div><div class="line">...</div><div class="line">&#123;	</div><div class="line">	...</div><div class="line">	&apos;plugins&apos;:[</div><div class="line">		new HtmlWebpackPlugin(&#123;</div><div class="line">			title:&apos;demo&apos;,	//设置html文件title</div><div class="line">			filename:&apos;index.html&apos;, //写入html文件的文字,默认index</div><div class="line">			template:&apos;./src/index.html&apos;, //设置模板文件，即文件内容会跟模板一样</div><div class="line">			inject:&apos;body&apos; //编译文件添加到html中的位置，true和body都会放到body的底部</div><div class="line">		&#125;),</div><div class="line">		new cleanWebpackPlugin([&apos;dist&apos;]) //参数一位需要清理的目录</div><div class="line">	]</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其实还有好多非常好用的插件，参展文档你可以慢慢学习各种差点的使用环境和方法</p>
<p>##开发环境<br>良好的开发环境能够大大增进开发的效率，事半工倍，在这介绍几个开发环境下常用到的配置项</p>
<blockquote>
<p><strong>devtool</strong></p>
</blockquote>
<p>在编译后的代码运行后，我们发现，开发工具里报错直接显示的是编译后的文件报错，这样的话导致我们很难定位到问题所在，加大了我们解决错误的时间和精力，所以我们添加devtool配置项能够定位到编译前文件的错误所在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">  &#123;</div><div class="line">  	devtool:&apos;inline-source-map&apos;// devtool的选项有很多，先选择报错最仔细的</div><div class="line">  &#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>这样子的话如果报错，问题很快找出位置并解决掉。</p>
<blockquote>
<p><strong>webpack-dev-server</strong><br>故名思意,开发环境下设置的服务器，在开发过程中想要实时跟新自己的代码，查案效果的话，每次都需要编译是在太麻烦，webpack-dev-server就很好的解决了我们的痛点</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add webpack-dev-server --dev</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">	devServer:&#123;//监测代码是否改变，是则更新代码刷新页面</div><div class="line">		 contentBase: path.resolve(__dirname, &apos;dist&apos;)//检测所在目录</div><div class="line">	&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// webpack.config.json</div><div class="line">...</div><div class="line">	start : &apos;webpack-dev-server --open&apos;; //--open打开浏览器，并开启node服务器，默认地址为localhost：8080</div><div class="line">...</div></pre></td></tr></table></figure>
<p>修改样式，保存，发现页面会自动刷新，但是在页面太多情况下，还是会造成刷新太慢太耗性能的问题，所以我们采用热加载的功能</p>
<blockquote>
<p><strong>模块热加载(HMR, Hot Module Replacement)</strong></p>
</blockquote>
<p>该功能很好的识别改动的模块，并只更新该模块的内容，效率大大提高同时，采用的是无刷新的更新方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">const webpack = require(&apos;webpack&apos;)</div><div class="line">&#123;</div><div class="line">...</div><div class="line">	devserver:&#123;</div><div class="line">		contentBase:path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">		hot:true, //设置启用HMR</div><div class="line">		hotOnly:true //报错不刷新页面</div><div class="line">	&#125;</div><div class="line">	plugins:[</div><div class="line">		...,</div><div class="line">		new webpack.HotModuleReplacementPlugin(),//配合上面hot的设置才能生效</div><div class="line">		new webpack.NamedModulesPlugin()//打印时返回模块实际路径</div><div class="line">	]</div><div class="line">...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&gt;</p>
<blockquote>
<p>webpack-dev-server 会为每个入口文件创建一个客户端脚本，这个脚本会监控该入口文件的依赖模块的更新，如果该入口文件编写了 HMR 处理函数，它就能接收依赖模块的更新，反之，更新会向上冒泡，直到客户端脚本仍没有处理函数的话，webpack-dev-server 会重新加载整个页面。如果入口文件本身发生了更新，因为向上会冒泡到客户端脚本，并且不存在 HMR 处理函数，所以会导致页面重载。</p>
</blockquote>
<p>我们已经开启了 HMR 的功能，HMR 的接口已经暴露在 module.hot属性之下，我们只需要调用 HMR API即可实现热加载。当“被加载模块”发生改变时，依赖该模块的模块便能检测到改变并接收改变之后的模块。</p>
<p>下面我们在index页面进行module.hot的检测是否可以访问</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//index.js文件地不添加</div><div class="line">...</div><div class="line">if(module.hot)&#123;</div><div class="line">	module.hot.accept(&apos;./print.js&apos;,function()&#123;</div><div class="line">		console.log(&apos;更新更新!&apos;);</div><div class="line">	&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面我们开启服务，发现修改样式等操作过后页面直接实现了热更新的功能</p>
<p>##生产环境<br>生产环境和开发环境的需求就不一样，基本上要求生成的文件体积小，没有多余的代码，那么我们怎么区别生产环境和开发环境呢。</p>
<blockquote>
<p><strong>设置变量进行辨别</strong></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack-p</div></pre></td></tr></table></figure>
<p>这个命令行其实是一个缩写命令相当于 webpack–optimize-minimize–define process.env.NODE_ENV=”‘production’。</p>
<ol>
<li>使用 UglifyJsPlugin，对代码进行压缩</li>
<li>运行 LoaderOptionsPlugin 插件，这个插件是用来迁移的，兼容处理</li>
<li>设置Node.js的变量，为后面做判断提供条件</li>
</ol>
<p>在这个过程中为了能够在编译之前就能够识别这个环境变量，所以我们处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add cross-env --dev</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//package.json</div><div class="line">&#123;</div><div class="line">...</div><div class="line">	build:&quot;cross-env NODE_ENV=production webpack -p&quot;</div><div class="line">...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面我们在webpack.config.js文件中进行判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line">module.epxort = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		app:&apos;./src/index.js&apos;,</div><div class="line">		other:&apos;./src/other.js&apos;</div><div class="line">	&#125;,//入口文件</div><div class="line">	output:&#123;</div><div class="line">		filename:process.env.NODE_ENV==&apos;production&apos;?&apos;[name].[chunkhash].js&apos;:[name].bundle.js,//编译后的文件名</div><div class="line">		path:path.resolve(__dirname, &apos;dist&apos;)//文件路径</div><div class="line">	&#125;,</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意，在这里设置chunkhash时，我盟们不能使用HMR，否则在编译时会导致报错，这就导致了我们在开启开发环境和生产环境时导致要手动屏蔽一些代码，这样很麻烦，所以我盟可以编写连个环境的配置代码，将一些公用的放在一个文件进行公用，这里就用到了webpack-merge</p>
<blockquote>
<p><strong>webpack-merge</strong></p>
</blockquote>
<p>我们先新建三个文件，webpack.common.js用来设置在开发和生产环境中公用的配置项，webpack.pro.js配置生产环境配置项，webpack.dev.js则配置生产环境的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">//webpack.common.js</div><div class="line">const path = require(&apos;path&apos;);</div><div class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</div><div class="line">const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    app: &apos;./src/index.js&apos;,</div><div class="line">    print: &apos;./src/print.js&apos;</div><div class="line">  &#125;,</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</div><div class="line">  &#125;,</div><div class="line">  plugins: [  </div><div class="line">  	new HtmlWebpackPlugin(&#123;</div><div class="line">      title: &apos;webpack demo&apos;,</div><div class="line">      filename: &apos;index.html&apos;</div><div class="line">    &#125;),   </div><div class="line">	new CleanWebpackPlugin([&apos;dist&apos;])</div><div class="line">  ],</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.css$/,</div><div class="line">        use: [&apos;style-loader&apos;,&apos;css-loader&apos;]</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        test: /\.(png|svg|jpg|gif)$/,</div><div class="line">        use: [&apos;file-loader&apos;]</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        test: /\.(woff|woff2|eot|ttf|otf)$/,</div><div class="line">        use: [&apos;file-loader&apos;]</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.js</div><div class="line">cosnt path = require(&apos;path&apos;);</div><div class="line">const Merge = require(&apos;webpack-merge&apos;);</div><div class="line">const commonConfig = require(&apos;./webpack.common.js&apos;);</div><div class="line">const webpack = require(&apos;webpack&apos;);</div><div class="line">module.export = Merge(commonConfig,&#123;</div><div class="line">	devtool:&apos;cheap-module-eval-source-map&apos;,</div><div class="line">	devserver:&#123;</div><div class="line">		contentBase:path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">		hot:true,</div><div class="line">		hotOnly:true</div><div class="line">	&#125;,</div><div class="line">	output: &#123;</div><div class="line">    	filename: &apos;[name].bundle.js&apos;</div><div class="line">  	&#125;,</div><div class="line">  	plugin:[</div><div class="line">  		new webpack.defaultPlugin(&#123;</div><div class="line">  			&apos;process.env.NODE_NV&apos;:JSON.stringify(&apos;development&apos;) //设置node环境变量</div><div class="line">  		&#125;)</div><div class="line">  		new webpack.HotModuleReplacementPlugin()</div><div class="line">  		new webpack.nameModulesPlugin()</div><div class="line">  	]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//webpack.pro.js</div><div class="line">cosnt path = require(&apos;path&apos;);</div><div class="line">const Merge = require(&apos;webpack-merge&apos;);</div><div class="line">const commonConfig = require(&apos;./webpack.common.js&apos;);</div><div class="line">const webpack = require(&apos;webpack&apos;);</div><div class="line">module.export = Merge(commonConfig,&#123;</div><div class="line">	devtool:&apos;cheap-module-source-map&apos;,</div><div class="line">	output: &#123;</div><div class="line">    	filename: &apos;[name].[chunkhash].js&apos;</div><div class="line">  	&#125;,</div><div class="line">  	plugin:[</div><div class="line">  		new webpack.defaultPlugin(&#123;</div><div class="line">  			&apos;process.env.NODE_NV&apos;:JSON.stringify(&apos;development&apos;) //设置node环境变量</div><div class="line">  		&#125;)</div><div class="line">  		new webpack.optimize.UglifyJsPlugin()//压缩代码</div><div class="line">  	]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//package.json</div><div class="line">&#123;</div><div class="line">...</div><div class="line">&apos;script&apos;:&#123;</div><div class="line">	...</div><div class="line">	&apos;build:dev&apos;: webpack-dev-server --open --config webpack.dev.js,</div><div class="line">	&apos;build:pro&apos;: webpack-dev-server --open --config webpack.pro.js</div><div class="line">&#125;</div><div class="line">...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>大功告成，这样子我们的两个简单的环境就算是配置完成了，需要更多的配置则可以查看官网倆选择性添加，添加配置的宗旨一定要牢记，是项目中需要什么东西我们才添加，而不是为了添加配置而配置。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Testing/" rel="tag"># Testing</a>
          
            <a href="/tags/Another-Tag/" rel="tag"># Another Tag</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/12/22/hello-world/" rel="next" title="牛逼">
                <i class="fa fa-chevron-left"></i> 牛逼
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/25/cc/" rel="prev" title="cc">
                cc <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/myavator.png"
               alt="Joker Chen" />
          <p class="site-author-name" itemprop="name">Joker Chen</p>
           
              <p class="site-description motion-element" itemprop="description">少时不努力，老大做IT</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joker Chen</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://ahz549467483.github.io.git.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://ahz549467483.github.io/2016/12/22/webpack3的常用配置/';
          this.page.identifier = '2016/12/22/webpack3的常用配置/';
          this.page.title = 'webpack3中常用的一些操作';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://ahz549467483.github.io.git.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  





  

  

  

  

  

</body>
</html>
